<!DOCTYPE html>
<html>
    <head> <title>Dashboard</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
        <link rel="stylesheet" href="dashboardCSS.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <!--BoxCDN icon link-->
        <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
        <!-- font awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://code.jquery.com/jquery-1.10.1.min.js"></script>
    </head>
    <style>
      /*navbar responsive*/
.topnav {
  overflow: hidden;
  background-color: #3D5A80;
  height: 67px;
  padding-left: 80px;
}

.topnav a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #04AA6D;
  color: white;
}

.topnav .icon {
  display: none;
}

@media screen and (max-width: 600px) {
  .topnav a:not(:first-child) {display: none;}
  .topnav a.icon {
    float: right;
    display: block;
  }
}

@media screen and (max-width: 600px) {
  .topnav.responsive {position: relative;}
  .topnav.responsive .icon {
    position: absolute;
    right: 0;
    top: 0;
  }
  .topnav.responsive a {
    float: none;
    display: block;
    text-align: left;
  }
  
}
    </style>
    <body>
      <div class="topnav" id="myTopnav">
        <nav class="nav">
          <div class="logo-content">
            <div class="logo">
              <a href="index.html">
                <img src="images/logo.png"></a>
                  <div class="logo-name">Dashboard</div>
                  <button id="logout" onclick="window.location.href='login.html'">Logout</button>
              </div>
          </div>
      </nav>
      </div>
        

        <div class="sidebar">
            <i class='bx bx-menu' id="btn"></i>
            <ul class="navList">
                <li>
                    <a href="adminProfile.html">
                    <img src="images/admin.png">
                    <span class="links_name">Admin Profile</span>
                    </a>
                    <span class="tooltip">Admin</span>
                </li>
                <li>
                    <a href="announcement.html">
                    <img src="images/announcement.png">
                    <span class="links_name">Announcement</span>
                    </a>
                    <span class="tooltip">Announcement</span>
                </li>
                <li>
                    <a href="ShuttleDriverAcct.html">
                    <img src="images/Shuttle Drivers Account.png">
                    <span class="links_name">Shuttle Driver’s Account</span>
                    </a>
                    <span class="tooltip">Driver</span>
                </li>
                <li>
                    <a href="CoomutersAcct.html">
                    <img src="images/Commuters Account.png">
                    <span class="links_name">Commuter’s Account</span>
                    </a>
                    <span class="tooltip">Commuter</span>
                </li>
                <li>
                    <a href="complaintsNfeedback.html">
                    <img src="images/Complaints and Feedbacks.png">
                    <span class="links_name">Complaints and Feedbacks</span>
                    </a>
                    <span class="tooltip">Complaints</span>
                </li>
                <li>
                    <a href="boundaryRemit.html">
                    <img src="images/Boundary Remittance.png">
                    <span class="links_name">Boundary Remittance</span>
                    </a>
                    <span class="tooltip">Boundary</span>
                </li>
                <li>
                    <a href="reload.html">
                      <!--img src="images/reload.png"!-->
                    <i class='bx bx-wallet'></i>
                    <span class="links_name">Reload</span>
                    </a>
                    <span class="tooltip">Reload</span>
                </li>
                <li>
                  <a href="withdrawal.html">
                    <!--img src="images/reload.png"!-->
                    <i class='bx bx-money-withdraw'></i>
                  <span class="links_name">Withdraw</span>
                  </a>
                  <span class="tooltip">Withdraw</span>
              </li>
            </ul>
        </div>

        <div class="main-content">
          <header>
            <h1>Welcome to ShuttleGo</h1>
          </header>

          <main>
            <div class="cards">
              <div class="card-single">
                <div class="tryNga">
                  <h1 id="No.OfCommuters"></h1>
                  <span>
                    <a href="commutersTable.html" id="link">Commuters </a> </span>
                </div>
                <div>
                  <span>
                    <i id="keme" class="fa">&#xf007;</i>
                  </span>
                </div>
              </div>

              <div class="card-single">
                <div class="tryNga">
                  <h1 id="total"></h1>
                  <span><p>Total Sales</p></span>
                </div>
                <div>
                  <span>
                    <i id="keme" class="fa">&#xf0d6;</i>
                  </span>
                </div>
              </div>

              <div class="card-single">
                <div class="tryNga">
                  <h1 id="No.OfF&C"></h1>
                  <h6>Feedback: <span id="FeedbackNum"> </span>Complaint: <span id="ComplaintNum"></span></h6>
                  <span><a href="cusComplaints.html" id="link">Feedbacks and <br> Complaints</a></span>
                </div>
                <div>
                  <span>
                    <i id="keme" class="fa">&#xf27a;</i>
                  </span>
                </div>
              </div>

              <div class="card-single">
                <div class="tryNga">
                  <h1 id="No.OfBoundary"></h1>
                  <h6>Pending: <span id="PendingBoundary"> </span>Paid: <span id="PaidBoundary"></span></h6>
                  <span><a href="boundaryRemit.html" id="link">Boundary Remittance </a></span>
                </div>
                <div>
                  <span>
                    <i id="keme" class="fa">&#xf0e6;</i>
                  </span>
                </div>
              </div>

              <div class="card-single">
                <div class="tryNga">
                  <h1 id="No.OfReload"></h1>
                  <h6>Pending: <span id="PendingNum"> </span> Loaded: <span id="PaidNum"></span></h6> <br>
                  <span><a href="reload.html" id="link">Reload </a></span>
                </div>
                <div>
                  <span>
                    <i id="keme" class="fa">&#xf10b;</i>
                  </span>
                </div>
              </div>
            </div> <!-- ending ng cards div  -->

            <div class="buttons">
              <a href="#Commutersbtn" id="Commuters">
                <button>Admins</button>
                <!-- <p>list of admins with their information</p>
                <p>Drivers: License No., Driver's Name, Bukyo Vehicle</p> -->
              </a>

                <a href="#TotalSalesbtn" id="TotalSales">
                  <button>Active Drivers</button>
                </a>
                      <!-- <a href="#Reloadbtn" id="Reload">
                        <button>Bukyo Vehicles</button>
                      </a> -->
            </div>

            <!-- charts  -->
            <!--div class="graphBox">
              <div class="boxy">
                <canvas id="myChart"></canvas>
                <a href="CommEveryMonth.html" id="chartbtn">View more</a>
              </div>
              <div class="boxy">
              <canvas id="everyMonth"></canvas>
              <a href="CommEveryMonth.html" id="chartbtn2">View more</a>
            </div>
            <h3>Record of commuters</h3>
          </div!-->

            <div class="recent-grid">
              <div class="projects">
                <div class="cardsy">
                  <div class="card-header">
                    <h3>Recent Activity</h3>
                    <!-- <a href="#seeAllbtn" id="seeAllbtn">
                    <button>See all
                      <span class="fa">&#xf178;</span>
                    </button></a> -->
                  </div>
                  
                  <!-- pang bungad -->
                  <div class="card-body">
                    <div class="table-responsive">
                    <iframe id="viewprof_iframe" src="listOfAdmins.html" frameborder="0" height="400" width="900"></iframe>
                    </div>
                  </div>
                  
                  <!-- admins btn -->
                  <div class="CommsDiv">
                    <iframe id="viewprof_iframe" src="listOfAdmins.html" frameborder="0" height="400" width="900"></iframe>
                  </div>

                  <!-- active drivers btn -->
                  <div class="totalSalesDiv">
                    <iframe id="viewprof_iframe" src="activeDrivers.html" frameborder="0" height="400" width="900"></iframe>
                  </div>

                </div><!-- cardsy -->
              </div>

              <div class="customers">
                <div class="projects">
                  <div class="cardsy">
                    <div class="card-header">
                      <h3>New Registers</h3>
                      <a href="CoomutersAcct.html" id="seeAllRegsbtn">
                      <button>See all
                        <span class="fa">&#xf178;</span>
                      </button></a>
                    </div>
                    <div id="sd" class="card-body">
                      <div  class="customer">
                        <!-- <div class="info">
                          <img src="images/user.png" width="40px" height="40px">
                          <div>
                            <h4 id="CommuterName">Samantha Glorieta</h4>
                            <small id="CommuterAddress">Phase 2</small>
                          </div>
                        </div> -->
                        <!-- <div class="contact">
                          <i class="fa">&#xf007;</i> 
                          <i class="fa">&#xf27a;</i> 
                          <i class="fa">&#xf095;</i> 
                        </div> -->
                      </div>
                    </div>
                      </div>
                    </div>
              </div>
            </div>
          </main>
        </div>

        <footer class="footer-distributed">

        <div class="footer-left">
            <h3>Washington <span>Place</span></h3>

            <p class="footer-links">
                <a href="index.html">Dashboard</a>
                |
                <a href="commutersTable.html">All commuters</a>
                |
                <a href="login.html">Log in</a>
            </p>

            <p id="coltext">DOWNLOAD OUR APP HERE:</p>
            <div class="content">
              <p><a href="https://drive.google.com/drive/folders/1JACHKQU4GNaF3-ca2-VM0jZ3Qa-Z6ZCL"> For commuters click here </a></p>
              <p><a href="https://drive.google.com/drive/folders/1JACHKQU4GNaF3-ca2-VM0jZ3Qa-Z6ZCL"> For drivers click here </a></p>
            </div>
        </div>

        <div class="footer-center">
            <div>
                <i class="fa fa-map-marker"></i>
                <p><span>Sampaloc II, Dasmariñas,</span>
                    <strong>Philippines</strong></p>
            </div>

            <div>
                <i class="fa fa-phone"></i>
                <p>0943 302 9424</p>
            </div>
            <div>
                <i class="fa fa-envelope"></i>
                <p><a href="mailto:peteregencia@yahoo.com">peteregencia@yahoo.com</a></p>
            </div>
            <div>
                <i class="fa fa-facebook"></i>
                <p><a href="https://www.facebook.com/cavitewashington">Washington Place facebook page</a></p>
            </div>
            <div>
              <p class="footer-company-name">Copyright © 2022 <strong>WashingtonPlaceDasmarinas</strong> <br>
                All rights reserved</p>
            </div>
        </div>
        <div class="footer-right">
            <p class="footer-company-about">
                <span>About Washington Place Dasmarinas</span>
                <strong>Washington Place Dasmarinas</strong> Stateland’s newest and to date, the
                grandest development, is set to rise in the emerging city of Dasmariñas in Cavite. Encompassing 40
                hectares of prime property along Aguinaldo Highway, it is envisioned to become a landmark community
                that boasts of modern-themed architectural designs.
            </p>
            <!--div class="footer-icons">
                <a href="https://www.facebook.com/cavitewashington"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-instagram"></i></a>
                <a href="#"><i class="fa fa-linkedin"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-youtube"></i></a>
            </div!-->
        </div>
    </footer>

    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>

    <script>
            const firebaseConfig = {
                    apiKey: "AIzaSyBfq-ptJkg7y-hJpyJrVq8x0PNoM4fT7cY",
                    authDomain: "shuttle-go-8d87a.firebaseapp.com",
                    databaseURL: "https://shuttle-go-8d87a-default-rtdb.firebaseio.com",
                    projectId: "shuttle-go-8d87a",
                    storageBucket: "shuttle-go-8d87a.appspot.com",
                    messagingSenderId: "509853219067",
                    appId: "1:509853219067:web:5e6b7fb55bbdba9cc0985e",
                    measurementId: "G-3YGP2PY9QX"
                  };
                  firebase.initializeApp(firebaseConfig);

                console.log(firebase);

                //Dashboard count
                var count;
                
                //Commuter
                firebase.database().ref('Commuters').once('value', function(snapshot){
                  count = snapshot.numChildren();
                  document.getElementById("No.OfCommuters").innerHTML = count;
                });

                //Feedback & Complaint
                var countFeedback , countComplaint;
                firebase.database().ref('Feedbacks').once('value', function(snapshot){
                  countFeedback = snapshot.numChildren();
                  document.getElementById("FeedbackNum").innerHTML = countFeedback;
                  
                firebase.database().ref('Complaints').once('value', function(snapshot){
                  countComplaint = snapshot.numChildren();
                  document.getElementById("ComplaintNum").innerHTML = countComplaint;

                  totalFeed = countFeedback + countComplaint;
                  document.getElementById("No.OfF&C").innerHTML = totalFeed;                
                });              
                });

                //Boundary
                firebase.database().ref('boundary').once('value', function(snapshot){
                  count = snapshot.numChildren();
                  document.getElementById("No.OfBoundary").innerHTML = count;
                });
                firebase.database().ref('boundary').orderByChild('status').equalTo('Pending').once('value', function(snapshot){
                  count = snapshot.numChildren();
                  document.getElementById("PendingBoundary").innerHTML = count;
                });

                firebase.database().ref('boundary').orderByChild('status').equalTo('Paid').once('value', function(snapshot){
                  count = snapshot.numChildren();
                  document.getElementById("PaidBoundary").innerHTML = count;
                });

                //Reload
                firebase.database().ref('Reload').once('value', function(snapshot){
                  count = snapshot.numChildren();
                  document.getElementById("No.OfReload").innerHTML = count;
                });

                firebase.database().ref('Reload').orderByChild('status').equalTo('Pending').once('value', function(snapshot){
                  count = snapshot.numChildren();
                  document.getElementById("PendingNum").innerHTML = count;
                  
                });

                firebase.database().ref('Reload').orderByChild('status').equalTo('Loaded').once('value', function(snapshot){
                  count = snapshot.numChildren();
                  document.getElementById("PaidNum").innerHTML = count;
                });

              // TOTAL SALES
              // var sales;
              // var salesAmount = 0;
              // firebase.database().ref('boundary').once('value', function (snapshot){
              //     snapshot.forEach(function(childSnapshot){
              //      sales = childSnapshot.val().payment;
              //      salesAmount += parseInt(sales);
              //     document.getElementById("total").innerHTML = salesAmount;
              //     //alert(salesAmount);      
              //   });
              // });
              
              var sales;
              var salesAmount=0;
              firebase.database().ref('boundary').orderByChild('status').equalTo('Paid').once('value', function(snapshot){
                snapshot.forEach(function(childSnapshot){
                  sales = childSnapshot.val().payment;
                  salesAmount += parseInt(sales);
                  document.getElementById("total").innerHTML = salesAmount;
                });
              });
                
              //New registers
              function Select_AllData(){
                firebase.database().ref('Commuters').once('value', function (snapshot){
                  snapshot.forEach(function(childSnapshot){
                  var name = childSnapshot.val().first_Name + " " + childSnapshot.val().last_Name;
                  var address = childSnapshot.val().address;

                 AddItemToTable(name, address);
              });
            });
           }
              window.onload = Select_AllData;  

              function AddItemToTable(name,address){
                
                let newDiv = document.getElementById("sd");
                let ComName = document.createElement("h4");
                let ComAddress= document.createElement("small");

              ComName.innerHTML= name+ '<i class="fa">&#xf007;</i> </i> <i class="fa">&#xf27a;</i> <i class="fa">&#xf095;</i>';
              ComAddress.innerHTML = address;
              
              newDiv.append(ComName,ComAddress);
              }
                

    </script>

        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
        <!--script src="https://cdn.jsdelivr.net/npm/chart.js@3.8.2/dist/chart.min.js"></script!--> <!-- link for chart  -->

            <script>
            let btn= document.querySelector("#btn");
            let sidebar= document.querySelector(".sidebar");

            btn.onclick= function(){
              sidebar.classList.toggle("active");
            }

            //show / hide button
            const CommtoggleBtn = document.querySelector('#Commuters');
            const toggleBtn = document.querySelector('#TotalSales');
            const reloadBtn = document.querySelector('#Reload');
            const seeAllBtn = document.querySelector('#seeAllbtn');
            const divList = document.querySelector('.card-body');

            const commsDiv = document.querySelector('.CommsDiv');
            const totalDiv = document.querySelector('.totalSalesDiv');
            const reloadDiv = document.querySelector('.reloadDiv');

            CommtoggleBtn.addEventListener('click', () => {
              if (commsDiv.style.display === 'block') {
                divList.style.display = 'none';
                totalDiv.style.display = 'none';
                feedsDiv.style.display = 'none';
                complaintsDiv.style.display = 'none';
              } else {
                commsDiv.style.display = 'block';
                divList.style.display = 'none';
                totalDiv.style.display = 'none';
              }
            });

            toggleBtn.addEventListener('click', () => {
              if (totalDiv.style.display === 'block') {
                divList.style.display = 'none';
                commsDiv.style.display = 'none';
                feedsDiv.style.display = 'none';
                complaintsDiv.style.display = 'none';
              } else {
                totalDiv.style.display = 'block';
                divList.style.display = 'none';
                commsDiv.style.display = 'none';
              }
            });
            </script>
    </body>
</html>
