<!DOCTYPE html>
<html>
    <head> <title>List of guests</title>
        <link rel="stylesheet" href="guestCSS.css">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" crossorigin="anonymous">
        <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
        <!-- font awesome -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    </head>
    <style>
      /*navbar responsive*/
.topnav {
  overflow: hidden;
  background-color: #3D5A80;
  height: 35px;
  padding-left: 80px;
}

.topnav a {
  float: left;
  display: block;
  color: #f2f2f2;
  text-align: center;
  padding: 14px 16px;
  text-decoration: none;
  font-size: 17px;
}

.topnav a:hover {
  background-color: #ddd;
  color: black;
}

.topnav a.active {
  background-color: #04AA6D;
  color: white;
}

.topnav .icon {
  display: none;
}

@media screen and (max-width: 600px) {
  .topnav a:not(:first-child) {display: none;}
  .topnav a.icon {
    float: right;
    display: block;
  }
}

@media screen and (max-width: 600px) {
  .topnav.responsive {position: relative;}
  .topnav.responsive .icon {
    position: absolute;
    right: 0;
    top: 0;
  }
  .topnav.responsive a {
    float: none;
    display: block;
    text-align: left;
  }
  
}
    </style>
    <body>
      <div class="topnav" id="myTopnav">
        <nav class="nav">
          <div class="logo-content">
            <div class="logo">
              <a href="index.html">
                <img src="images/logo.png"></a>
                  <div class="logo-name">List of guests</div>
                  <button id="logout" onclick="window.location.href='login.html'">Logout</button>
              </div>
          </div>
      </nav>
      </div>



      <div class="topnav">
        <a href="#print">
          <button type="submit" onclick="PrintTable();" id="btnPrint">PRINT</button>
        </a>
      </div>

      <div class="sidebar">
        <i class='bx bx-menu' id="btn"></i>
        <ul class="navList">
            <li>
                <a href="adminProfile.html">
                <img src="images/admin.png">
                <span class="links_name">Admin Profile</span>
                </a>
                <span class="tooltip">Admin</span>
            </li>
            <li>
                <a href="announcement.html">
                <img src="images/announcement.png">
                <span class="links_name">Announcement</span>
                </a>
                <span class="tooltip">Announcement</span>
            </li>
            <li>
                <a href="ShuttleDriverAcct.html">
                <img src="images/Shuttle Drivers Account.png">
                <span class="links_name">Shuttle Driver’s Account</span>
                </a>
                <span class="tooltip">Driver</span>
            </li>
            <li>
                <a href="CoomutersAcct.html">
                <img src="images/Commuters Account.png">
                <span class="links_name">Commuter’s Account</span>
                </a>
                <span class="tooltip">Commuter</span>
            </li>
            <li>
                <a href="complaintsNfeedback.html">
                <img src="images/Complaints and Feedbacks.png">
                <span class="links_name">Complaints and Feedbacks</span>
                </a>
                <span class="tooltip">Complaints</span>
            </li>
            <li>
                <a href="boundaryRemit.html">
                <img src="images/Boundary Remittance.png">
                <span class="links_name">Boundary Remittance</span>
                </a>
                <span class="tooltip">Boundary</span>
            </li>
            <li>
                <a href="reload.html">
                  <!--img src="images/reload.png"!-->
                  <i class='bx bx-wallet'></i>
                <span class="links_name">Reload</span>
                </a>
                <span class="tooltip">Reload</span>
            </li>
            <li>
              <a href="withdrawal.html">
                <!--img src="images/reload.png"!-->
                <i class='bx bx-money-withdraw'></i>
              <span class="links_name">Withdraw</span>
              </a>
              <span class="tooltip">Withdraw</span>
          </li>
        </ul>
    </div>

    <div id="dvContents" class="tableDiv">
    <link rel="stylesheet" href="https://cdn.datatables.net/1.10.13/css/jquery.dataTables.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script src="https://cdn.datatables.net/1.10.13/js/jquery.dataTables.min.js"></script>
    <table id="example" class="display" width="100%" cellspacing="0">
      <thead>
      <tr>
        <th>ID</th>
        <th id="tbtname">Guest name</th>
        <th>Contact Number</th>
        <th>Time of visit</th>
        <th>Date of visit</th>
      </tr>
    </thead>

    
    <tbody id="tbody1"></tbody>
      </table>
    </div>
    <footer class="footer-distributed">

        <div class="footer-left">
            <h3>Washington <span>Place</span></h3>

            <p class="footer-links">
                <a href="index.html">Dashboard</a>
                |
                <a href="commutersTable.html">All commuters</a>
                |
                <a href="login.html">Log in</a>
            </p>

            <p id="coltext">DOWNLOAD OUR APP HERE:</p>
            <div class="content">
              <p><a href="https://drive.google.com/drive/folders/1JACHKQU4GNaF3-ca2-VM0jZ3Qa-Z6ZCL"> For commuters click here </a></p>
              <p><a href="https://drive.google.com/drive/folders/1JACHKQU4GNaF3-ca2-VM0jZ3Qa-Z6ZCL"> For drivers click here </a></p>
            </div>
        </div>

        <div class="footer-center">
            <div>
                <i class="fa fa-map-marker"></i>
                <p><span>Sampaloc II, Dasmariñas,</span>
                    <strong>Philippines</strong></p>
            </div>

            <div>
                <i class="fa fa-phone"></i>
                <p>0943 302 9424</p>
            </div>
            <div>
                <i class="fa fa-envelope"></i>
                <p><a href="mailto:peteregencia@yahoo.com">peteregencia@yahoo.com</a></p>
            </div>
            <div>
                <i class="fa fa-facebook"></i>
                <p><a href="https://www.facebook.com/cavitewashington">Washington Place facebook page</a></p>
            </div>
            <div>
              <p class="footer-company-name">Copyright © 2022 <strong>WashingtonPlaceDasmarinas</strong> <br>
                All rights reserved</p>
            </div>
        </div>
        <div class="footer-right">
            <p class="footer-company-about">
                <span>About Washington Place Dasmarinas</span>
                <strong>Washington Place Dasmarinas</strong> Stateland’s newest and to date, the
                grandest development, is set to rise in the emerging city of Dasmariñas in Cavite. Encompassing 40
                hectares of prime property along Aguinaldo Highway, it is envisioned to become a landmark community
                that boasts of modern-themed architectural designs.
            </p>
            <!--div class="footer-icons">
                <a href="https://www.facebook.com/cavitewashington"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-instagram"></i></a>
                <a href="#"><i class="fa fa-linkedin"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-youtube"></i></a>
            </div!-->
        </div>
    </footer>


    
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/7.15.5/firebase-database.js"></script>

    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>
    <script id="MainScript">

            const firebaseConfig = {
                    apiKey: "AIzaSyBfq-ptJkg7y-hJpyJrVq8x0PNoM4fT7cY",
                    authDomain: "shuttle-go-8d87a.firebaseapp.com",
                    databaseURL: "https://shuttle-go-8d87a-default-rtdb.firebaseio.com",
                    projectId: "shuttle-go-8d87a",
                    storageBucket: "shuttle-go-8d87a.appspot.com",
                    messagingSenderId: "509853219067",
                    appId: "1:509853219067:web:5e6b7fb55bbdba9cc0985e",
                    measurementId: "G-3YGP2PY9QX"
                  };
                  firebase.initializeApp(firebaseConfig);

                console.log(firebase);

                 //select all data
      function Select_AllData(){
        firebase.database().ref('Queue/Guest/').once('value', function (snapshot){
          snapshot.forEach(function(childSnapshot){
            var guestt = childSnapshot.val().Bookfor;
            var contactt = childSnapshot.val().PhoneNumber;
            var datee = childSnapshot.val().To;
            var timee = childSnapshot.val().Time;
          
            AddItemToTable(guestt, contact, datee, timee);
          });
        });
      }

      var studentNo = 0;
      var qList = [];
      

        function AddItemToTable(guestt, contactt, datee, timee){
        var tbody1 = document.getElementById("tbody1");
        let trow = document.createElement("tr");
        let td0 = document.createElement("td");
        let td1 = document.createElement("td");
        let td2 = document.createElement("td");
        let td3 = document.createElement("td");
        let td4 = document.createElement("td");
    
        qList.push([guestt, contactt,datee, timee]);
        
        td0.innerHTML = ++studentNo;
        td1.innerHTML = guestt;
        td2.innerHTML = contactt;
        td3.innerHTML = datee;
        td4.innerHTML = timee;
             
        trow.appendChild(td0);
        trow.appendChild(td1);
        trow.appendChild(td2);
        trow.appendChild(td3);
        trow.appendChild(td4);
        tbody1.appendChild(trow);
      }

      function AddAllItems(guest) {
            studentNo=0;
            tbody1.innerHTML="";
            guest.forEach(element => {
              AddItemToTable(element.Bookfor, element.PhoneNumber, element.To, element.Time)
            });
          }


          function getAllData() {
              const dbref = firebase.database().ref("Reload");
              get(child(dbref, "Reload"))
              .then((snapshot) => {
                var commuter = [];
                snapshot.forEach(childSnapshot => {
                  commuter.push(childSnapshot.val());
                });
                AddAllItems(commuter);
              })
          }

        function getAllDataRT() {
              const dbRef = firebase.database().ref("Reload");

              dbRef.on('value', (snapshot)=>{
                var commuters = [];
                snapshot.forEach(childsnapshot => {
                  commuters.push(childsnapshot.val());
                });
                AddAllItems(commuters);
              })
          }

        window.onLoad = getAllDataRT();

</script>



    </body>

    <!-- printing css starts here  -->
    <style id="table_style" type="text/css">
    table img{
      height: 45px;
      width: 46px;
      left: 12px;
      position: relative;
    }

    td .viewIDbtn{
      font-family: "Salsa";
      width: 90px;
      height: 26px;
      background: #3d5a80;
      border-radius: 11px;
      border-color: transparent;
      font-size: 14px;
      line-height: 15px;
      letter-spacing: 1.5px;
      color: #E0FBFC;
    }
    @media print{
      table
      {
          border: transparent;
      }
      #example_length label, #example_filter label{ /*show entries number and search*/
        display: none;
      }
    }
    </style>
    <!-- printing css ends here  -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/js/bootstrap.bundle.min.js" integrity="sha384-pprn3073KE6tl6bjs2QrFaJGz5/SUsLqktiwsUTF55Jfv3qYSDhgCecCxMW52nD2" crossorigin="anonymous"></script>

    <script>
        let btn= document.querySelector("#btn");
        let sidebar= document.querySelector(".sidebar");

        btn.onclick= function(){
          sidebar.classList.toggle("active");
        }
        </script>

        <script type="text/javascript"> //printing script
    function PrintTable() {
        var printWindow = window.open('', '', 'height=700,width=1200');
        printWindow.document.write('<html><head><title>Table Contents</title>');

        //Print the Table CSS.
        var table_style = document.getElementById("table_style").innerHTML;
        printWindow.document.write('<style type = "text/css">');
        printWindow.document.write(table_style);
        printWindow.document.write('</style>');
        printWindow.document.write('</head>');

        //Print the DIV contents i.e. the HTML Table.
        printWindow.document.write('<body>');
        var divContents = document.getElementById("dvContents").innerHTML;
        printWindow.document.write(divContents);
        printWindow.document.write('</body>');

        printWindow.document.write('</html>');
        printWindow.document.close();
        printWindow.print();
    }
    </script>
</script>
</html>
