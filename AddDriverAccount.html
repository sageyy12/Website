<!DOCTYPE html>
<html>
    <head> <title>Add Account</title>
        <link rel="stylesheet" href="AddDriverAccountCSS.css">
        <!--BoxCDN icon link-->
        <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>
        <!-- Adding firebaseUI authenticaion -->
        <!-- <script src="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.js"></script>
        <link type="text/css" rel="stylesheet" href="https://www.gstatic.com/firebasejs/ui/6.0.1/firebase-ui-auth.css" /> -->
      </head>
    <body>
        <nav class="nav">
            <div class="logo-content">
              <a href="dashboard.html">
              <div class="logo">
                  <img src="images/logo.png"></a>
                    <div class="logo-name">Shuttle Driver’s Account</div>
                    <button id="logout">Logout</button>
                </div>
            </div>
        </nav>
        <div class="sidebar">
            <i class='bx bx-menu' id="btn"></i>
            <ul class="navList">
                <li>
                    <a href="adminProfile.html">
                    <img src="images/admin.png">
                    <span class="links_name">Admin Profile</span>
                    </a>
                    <span class="tooltip">Admin</span>
                </li>
                <li>
                    <a href="announcement.html">
                    <img src="images/announcement.png">
                    <span class="links_name">Announcement</span>
                    </a>
                    <span class="tooltip">Announcement</span>
                </li>
                <li>
                    <a href="ShuttleDriverAcct.html">
                    <img src="images/Shuttle Drivers Account.png">
                    <span class="links_name">Shuttle Driver’s Account</span>
                    </a>
                    <span class="tooltip">Driver</span>
                </li>
                <li>
                    <a href="CoomutersAcct.html">
                    <img src="images/Commuters Account.png">
                    <span class="links_name">Commuter’s Account</span>
                    </a>
                    <span class="tooltip">Commuter</span>
                </li>
                <li>
                    <a href="complaintsNfeedback.html">
                    <img src="images/Complaints and Feedbacks.png">
                    <span class="links_name">Complaints and Feedbacks</span>
                    </a>
                    <span class="tooltip">Complaints</span>
                </li>
                <li>
                    <a href="boundaryRemit.html">
                    <img src="images/Boundary Remittance.png">
                    <span class="links_name">Boundary Remittance</span>
                    </a>
                    <span class="tooltip">Boundary</span>
                </li>
                <li>
                    <a href="reload.html">
                      <!--img src="images/reload.png"!-->
                  <i class='bx bx-wallet'></i>
                    <span class="links_name">Reload</span>
                    </a>
                    <span class="tooltip">Reload</span>
                </li>
                <li>
                  <a href="withdrawal.html">
                    <!--img src="images/reload.png"!-->
                    <i class='bx bx-money-withdraw'></i>
                  <span class="links_name">Withdraw</span>
                  </a>
                  <span class="tooltip">Withdraw</span>
              </li>
            </ul>
        </div>

        <div class="title">
          <i class='bx bxs-user-plus'></i>
            <div class="text">Add New Shuttle Driver</div>
        </div>

        <!-- sliding  -->
        <div class="slideshow-container">
          <div class="mySlides fade">
            <div class="numbertext">1 / 3</div>
            <img src="images/whitebg.png" style="width:50%">
            <!--h1>BASIC INFORMARTION</h1!-->
              <label for="FnameLabel">First name</label><br>
              <input type="text" name="Fname" id="Fname" class="input" placeholder="First name" required>

              <label for="MnameLabel" id="midNameLabel">Middle name</label><br>
              <input type="text" name="Mname" id="Mname" class="input" placeholder="Middle name" required>

              <label for="email" id="LnameLabel">Last name</label><br>
              <input type="text" name="Lname" id="Lname" class="input" placeholder="Last name" required>

              <label for="num" id="numLabel">Phone number</label><br>
              <input type="text" name="num" id="num" class="input" placeholder="Phone number" required>

              <label for="pass" id="addressLabel">Address</label><br>
              <input type="text" name="address" id="address" class="input" placeholder="Address" required>

              <label for="pass" id="licenseLabel">Driver's License</label><br>
              <input type="text" name="license" id="license" class="input" placeholder="License" required>
          </div>

          <div class="mySlides fade">
            <div class="numbertext">2 / 3</div>
            <img src="images/whitebg.png" style="width:50%">
            <label for="Uname" id="UnameLabel">User name</label><br>
            <input type="text" name="Uname" id="Uname" class="input" placeholder="User name" required>

            <label for="EmailLabel" id="EmailLabel">Email</label><br>
            <input type="text" name="Email" id="Email" class="input" placeholder="Email" required>

            <label for="pass" id="passLabel">Password</label><br>
            <input type="password" name="pass" id="pass">

            <label for="regdate" id="regdateLabel">Registration Date</label><br>
            <input type="date" name="regdate" value="2022-01-01" min="2022-01-01" max="2100-12-31" class="input" id="regdate">

            <label for="status" id="statusLabel">Status</label><br>
            <input type="text" name="active_status" class="input" id="status" required>
          </div>

          <div class="mySlides fade">
            <div class="numbertext">3/ 3</div>
            <img src="images/whitebg.png" style="width:50%">
            <label for="myfile">Attach picture here:</label>
            <form action="/action_page.php">
              <input type="file" id="myfile" name="myfile" class="input">
            </form>

            <a href="#submit"><button type="submit" id="addAccountbtn">ADD ACCOUNT</button></a>
            <a href="AddDriverAccount.html"><button id="cancelbtn">CANCEL</button></a>
          </div>

          <a class="prev" onclick="plusSlides(-1)">❮</a>
          <a class="next" onclick="plusSlides(1)">❯</a>

          </div>
          <br>

          <div style="text-align:center">
            <span class="dot" onclick="currentSlide(1)"></span>
            <span class="dot" onclick="currentSlide(2)"></span>
          </div>

          <footer class="footer-distributed">

        <div class="footer-left">
            <h3>Washington <span>Place</span></h3>

            <p class="footer-links">
                <a href="dashboard.html">Dashboard</a>
                |
                <a href="commutersTable.html">All commuters</a>
                |
                <a href="login.html">Log in</a>
            </p>

            <p id="coltext">DOWNLOAD OUR APP HERE:</p>
            <div class="content">
              <p><a href="https://drive.google.com/file/d/1d8tUT5DQuuEI0k3D9PMNzJ99qE45hrwl/view?usp=sharing"> For commuters click here </a></p>
              <p><a href="https://drive.google.com/file/d/1d8tUT5DQuuEI0k3D9PMNzJ99qE45hrwl/view?usp=sharing"> For drivers click here </a></p>
            </div>
        </div>

        <div class="footer-center">
            <div>
                <i class="fa fa-map-marker"></i>
                <p><span>Sampaloc II, Dasmariñas,</span>
                    <strong>Philippines</strong></p>
            </div>

            <div>
                <i class="fa fa-phone"></i>
                <p>0943 302 9424</p>
            </div>
            <div>
                <i class="fa fa-envelope"></i>
                <p><a href="mailto:peteregencia@yahoo.com">peteregencia@yahoo.com</a></p>
            </div>
            <div>
                <i class="fa fa-facebook"></i>
                <p><a href="https://www.facebook.com/cavitewashington">Washington Place facebook page</a></p>
            </div>
            <div>
              <p class="footer-company-name">Copyright © 2022 <strong>WashingtonPlaceDasmarinas</strong> <br>
                All rights reserved</p>
            </div>
        </div>
        <div class="footer-right">
            <p class="footer-company-about">
                <span>About Washington Place Dasmarinas</span>
                <strong>Washington Place Dasmarinas</strong> Stateland’s newest and to date, the
                grandest development, is set to rise in the emerging city of Dasmariñas in Cavite. Encompassing 40
                hectares of prime property along Aguinaldo Highway, it is envisioned to become a landmark community
                that boasts of modern-themed architectural designs.
            </p>
            <!--div class="footer-icons">
                <a href="https://www.facebook.com/cavitewashington"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-instagram"></i></a>
                <a href="#"><i class="fa fa-linkedin"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-youtube"></i></a>
            </div!-->
        </div>
    </footer>

    <script>
    let btn= document.querySelector("#btn");
    let sidebar= document.querySelector(".sidebar");

    btn.onclick= function(){
      sidebar.classList.toggle("active");
    }

    //sliding
    let slideIndex = 1;
    showSlides(slideIndex);

    function plusSlides(n) {
      showSlides(slideIndex += n);
    }

    function currentSlide(n) {
      showSlides(slideIndex = n);
    }

    function showSlides(n) {
      let i;
      let slides = document.getElementsByClassName("mySlides");
      let dots = document.getElementsByClassName("dot");
      if (n > slides.length) {slideIndex = 1}
      if (n < 1) {slideIndex = slides.length}
      for (i = 0; i < slides.length; i++) {
        slides[i].style.display = "none";
      }
      for (i = 0; i < dots.length; i++) {
        dots[i].className = dots[i].className.replace(" active", "");
      }
      slides[slideIndex-1].style.display = "block";
      dots[slideIndex-1].className += " active";
    }
    </script>

  <!-- adding user from html to firebase -->
  <script type="module">
    // Import the functions you need from the SDKs you need
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-app.js";
    import { getDatabase, set, ref, update} from "https://www.gstatic.com/firebasejs/9.10.0/firebase-database.js";
    import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.10.0/firebase-auth.js";

    // TODO: Add SDKs for Firebase products that you want to use
    // https://firebase.google.com/docs/web/setup#available-libraries

    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyBfq-ptJkg7y-hJpyJrVq8x0PNoM4fT7cY",
      authDomain: "shuttle-go-8d87a.firebaseapp.com",
      databaseURL: "https://shuttle-go-8d87a-default-rtdb.firebaseio.com",
      projectId: "shuttle-go-8d87a",
      storageBucket: "shuttle-go-8d87a.appspot.com",
      messagingSenderId: "509853219067",
      appId: "1:509853219067:web:5e6b7fb55bbdba9cc0985e",
      measurementId: "G-3YGP2PY9QX"
    };

    // Initialize Firebase
    const app = initializeApp(firebaseConfig);
    const auth = getAuth();
    const database = getDatabase(app);

    addAccountbtn.addEventListener('click', (e) => {

      var firstName = document.getElementById('Fname').value;
      var midName = document.getElementById('Mname').value; 
      var lastName = document.getElementById('Lname').value;
      var address = document.getElementById('address').value; 
      var license = document.getElementById('license').value; 
      var email = document.getElementById('Email').value;
      var profile = document.getElementById('myfile').value; 
      var registration = document.getElementById('regdate').value;
      var status = document.getElementById('status').value;
      var password = document.getElementById('pass').value;
      var phonenum = document.getElementById('num').value;
      var username = document.getElementById('Uname').value;

        //sign up user
        createUserWithEmailAndPassword(auth, email, password, firstName, midName, lastName, address, license, profile, registration, status, phonenum, username)  
            .then((userCredential) => {
                // Signed in //ssig
                const user = userCredential.user;
                // ... user.uid
                set(ref(database, 'users/' + user.uid), {
                    email: email,
                    password: password,
                    firstName: firstName,
                    midName: midName,
                    lastName: lastName,
                    license: license,
                    profile: profile,
                    registration: registration,
                    status: status,
                    address: address,
                    phonenum: phonenum,
                    username: username
                })
                    .then(() => {
                        // Data saved successfully!
                        alert('User created successfully');
        
                    })
                    .catch((error) => {
                      const errorCode = error.code;
                      const errorMessage = error.message;
                      alert(error + " User not created");
                    });
            })
            // .catch((error) => {
            //     const errorCode = error.code;
            //     const errorMessage = error.message;
            //     // ..
            //       alert(errorMessage + " error sa paggawa ng acct");
            // });

        // log in user
        // signInWithEmailAndPassword(auth, email, password, firstName, midName, lastName, address, license, profile, registration, status)  
        //     .then((userCredential) => {
        //         // Signed in
        //         const user = userCredential.user;
        //         // ...

        //         // save log in details into real time database
        //         var lgDate = new Date();
        //         update(ref(database, 'users/' + user.uid), {
        //             last_login: lgDate,
        //         })
        //             .then(() => {
        //                 // Data saved successfully!
        //                 alert('user logged in successfully');

        //             })
        //             .catch((error) => {
        //                 // The write failed...
        //                 alert(error + " hindi nag log in");
        //             });
        //     })
            // .catch((error) => {
            //     const errorCode = error.code;
            //     const errorMessage = error.message;
            //     alert(errorMessage + " dulong catch error");
            // });

        //sign out user
        // signOut(auth).then(() => {
        //        // Sign-out successful.
        // }).catch((error) => {
        //     // An error happened.
        // });
    });
  </script>
    </body>
</html>